<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hy.serverside.mapper.UserMapper">

    <select id="getUserTest" resultType="com.hy.serverside.entity.User">
        select * from user where id = #{id};
    </select>
    
    <select id="getParentName" resultType="String">
        SELECT user.name from user	WHERE
user.openid=(
 SELECT
	      n3.node_name
      FROM
	      nodeInfo n1
      INNER JOIN nodeRelationship n2 ON n1.node_id = n2.ancestor
      INNER JOIN nodeInfo n3 ON (n2.descendant-1) = n3.node_id
      WHERE
	  n1.node_name = #{subclassName}
	  	and n2.distance = 0
)
    </select>

    <select id="getByopenId" resultType="User">
        select * from user where openid=#{openId}
    </select>

</mapper>